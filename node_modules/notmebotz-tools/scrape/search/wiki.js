/*
*[Scrape Wikipedia]* 
By Fruatre
wa.me/6285817597752
Saluran : https://whatsapp.com/channel/0029VaNR2B6BadmioY6mar3N
*/

const axios = require('axios')
const cheerio = require('cheerio')

async function wiki(query) {
    try {
        const res = await axios.get(`https://id.m.wikipedia.org/wiki/${query}`)
        const $ = cheerio.load(res.data)
        const hasil = []
        let wiki = $('#mf-section-0').find('p').text()
        let thumb = $('meta[property="og:image"]').attr('content')
        hasil.push({
            wiki, thumb
        })
        return {
            author: "Herza",
            status: 200,
            data: hasil
        }
    } catch(e) {
        return {
            author: "Herza",
            status: 500,
            data: "Error detected, please contact owner if the error still avaible" + e
        }
    }
}

module.exports = { wiki }